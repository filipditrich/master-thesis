%%%%% Basic setup for one-sided printing:
%%%%% Margins: left 40mm, right 25mm, top and bottom 25mm (but beware, LaTeX adds 1in by itself)
%%%%% ---------------------------------------------------------------
\documentclass[12pt, a4paper]{report}
\usepackage{geometry}
\setlength\textwidth{145mm}
\setlength\textheight{247mm}
\setlength\oddsidemargin{15mm}
\setlength\evensidemargin{15mm}
\setlength\topmargin{0mm}
\setlength\headsep{0mm}
\setlength\headheight{0mm}
\newcommand{\openright}{\clearpage}

%%%%% Base setup for two-sided printing:
%%%%% ---------------------------------------------------------------
% \documentclass[12pt, a4paper, twoside, openright]{report}
% \setlength\textwidth{145mm}
% \setlength\textheight{247mm}
% \setlength\oddsidemargin{15mm}
% \setlength\evensidemargin{0mm}
% \setlength\topmargin{0mm}
% \setlength\headsep{0mm}
% \setlength\headheight{0mm}
% \let\openright=\cleardoublepage

%%%%% Czech language settings
%%%%% ---------------------------------------------------------------
% \usepackage[czech]{babel}
% \ifx\uv\undefined\newcommand{\uv}[1]{,,#1``}\fi
\usepackage [english]{babel}
\usepackage [autostyle, english = american]{csquotes}
\MakeOuterQuote{"}

%%%%% Preamble with settings and macros
%%%%% ---------------------------------------------------------------
\include{preamble}

%%%%% Hyperlinks setup
%%%%% ------------------------------------------------------------
\usepackage[unicode]{hyperref}
\hypersetup{pdftitle=Cashless festival data analysis and analytical dashboard development,
	pdfauthor=Bc. Filip Ditrich
	ps2pdf,
	colorlinks=true,
	urlcolor=black,
	linkcolor=black,
	citecolor=black,
	pdfstartview=FitH,
	pdfpagemode=UseOutlines,
	pdfnewwindow,
	breaklinks
}
\addto\extrasenglish{%
	\renewcommand{\chapterautorefname}{\textbf{Chapter}}
	\renewcommand{\sectionautorefname}{\textbf{Section}}
	\renewcommand{\subsectionautorefname}{\textbf{Subsection}}
	\renewcommand{\subsubsectionautorefname}{\textbf{Subsubsection}}
	\renewcommand{\figureautorefname}{\textbf{Figure}}
	\renewcommand{\tableautorefname}{\textbf{Table}}
	\newcommand{\listingautorefname}{\textbf{Source Code}}
}

%%%%% Bibliography setup
%%%%% ---------------------------------------------------------------
%\bibliographystyle{/Users/filipditrich/University/master_thesis/thesis/czplainnat.bst}
\bibliographystyle{unsrt}
\renewcommand{\bibname}{References}

%%%%% Table of contents setup
%%%%% ---------------------------------------------------------------
\usepackage[nottoc]{tocbibind}
\renewcommand{\listingscaption}{Source Code}
\renewcommand{\listoflistingscaption}{List of Source Codes}
\usepackage[titles]{tocloft}
\renewcommand\cftchapafterpnum{\vskip0pt}
\renewcommand\cftsecafterpnum{\vskip2pt}
\usepackage[toc,page]{appendix}
% \renewcommand{\appendixtocname}{Seznam příloh}
% \renewcommand{\appendixpagename}{Seznam příloh}

%%%%% Directories setup
%%%%% ---------------------------------------------------------------
\newcommand{\CoreFigures}{/figures}
\newcommand{\ThesisFigures}{./figures}
\newcommand{\ChartsDir}{./figures/charts}
\newcommand{\DataDir}{./figures/charts/data}

% TODO (HIGH prio):
%% - [] finish up dashboard implementation, prepare to submission format (add as appendix)
%% - [] prepare dashboard screenshots for Implementation Results section
%% - [] revise Introduction chapter – formatting, corrections, and references
%% - [] revise Data Methodology chapter - formatting, corrections, and references
%% - [x] write Implementation chapter
%% - [x] write Conclusion chapter

% TODO (MEDIUM prio):
%% - [] revise Data Analysis and Results chapter - shorten, formatting, corrections, and references, improve wording
%% --- [] NOTE: Každý blok research question zakončujete frází typu: "answers to these question should provide valuable/detailed insights" občas to obměňte
%% - [x] write the abstract and keywords

% TODO (LOW prio):
%% - [] revise all figures, tables, and charts - content correctness, graphical finalization, alignment, etc.
%% - [] overall revision - grammatical correctness and final visual adjustments (line breaks, indentation, new pages, etc.)
%% - [] add copy of the assignment PDF
%% - [] prepare the Extended Summary
%% - [x] update the acknowledgements

% TODO (backlog):
%% - [] improve KDD diagram and sankey charts if time allows
%% - [x] setup the structure and technical setup
%% - [x] FIX: references order is wrong somehow
%% - [x] FIX: Wrong RQ numbering - rename charts, match with the correct RQ nums (Customers Analysis+)
%% - [x] use acronyms or remove List of Acronyms

% TODO: Charts and figures list:
%% - [🟢] Figure 2.1: Top-Up Transactions by Payment Method                  -- hopefully ok
%% - [🟢] Figure 2.2: Sales of the Organizer vs. External Vendors            -- hopefully ok
%% - [🟢] Figure 2.3: Remaining Chip Balances Sankey Diagram                 -- hopefully OK
%% - [🟢] Figure 2.4: Breakdown of All Revenue Streams                       -- hopefully OK
%% - [🟠] Figure 2.5: Overall Cash Flow Diagram                              -- improve coloring and fonts
%% - [🟢] Figure 2.6: Transactions Peaks                                     -- hopefully OK
%% - [🟢] Figure 2.7: Transaction Processing Times                           -- hopefully OK
%% - [🟢] Figure 2.8: Best Top-Up Points                                     -- hopefully OK
%% - [🟢] Figure 2.9: Best Products by Category                              -- hopefully OK
%% - [🟢] Figure 2.10: Returnable Cups                                       -- hopefully OK
%% - [🟢] Figure 2.11: Most Consumed Beer Brands                             -- hopefully OK
%% - [🟢] Figure 2.12: Visitor Arrival Patterns  							 -- hopefully OK
%% - [🟢] Figure 2.13: Credit Top-up Patterns During Event                   -- hopefully OK
%% - [🟢] Figure 2.14: Customer Distribution by Type         		         -- hopefully OK
%% - [🟢] Figure 2.15: Customer App Usage   							     -- hopefully OK
%% - [🟢] Figure 2.16: Bank Refunds Distribution                             -- hopefully OK
%% - [🟢] Figure 2.17: Card Schemes Distribution                             -- hopefully OK
%% - [🟢] Figure 2.18: Top-up Behavior Analysis                              -- hopefully OK
%% - [🟢] Figure 2.19: Beverage Preferences Throughout the Day               -- hopefully OK
%% - [🟢] Figure 2.20: Product Combinations (Including Returnable Cups)      -- hopefully OK
%% - [🟢] Figure 2.21: Product Combinations (Exlucing Returnable Cups)       -- hopefully OK

% Revision notes (23. 12. 2024)
%% - Úprava parádní, dobře strukturované. Líbí se mi zvýrazněné zásadní pojmy, boxy Why is this important a jasné značení a zavedení pojmů.
%% - Drobná slabina kapitoly jedna je, že je poněkud abstraktní v tom smyslu, že mluvíte o hromadě kroků, které vlastně nejsou nikde ukázané. Ale hádám, že z podstaty práce s daty, která musí zůstat skrytá, s tím nejde nic dělat. Mám dojem, že to víte, ale že jste odvedl dobrou práci tím, že jste to vynahradil celkem důkladnám popisem. Za mě je to v pořádku, ale počítejte s tím, že do toho možná bude někdo rýpat.
%% - Pozor na opakující se fráze. Není to zásadní chyba, ale pokud máte v úvodních a závěrečných odstavících často podobné fráze typu "was crucial for understanding", "provide useful insights", "this section focuses on" atd., při souvislém čtení to bije do očí. Všimnete si toho, až si práci přečtete v kuse. Důležitost a hodnotu insights jste stanovil v kapitole 1, takže v kapitole 2 už bych ji moc neopakoval a soustředil se spíš na výsledky. Tak ty fráze občas pozměňte, nebo vynechte. Low-priority.
%% - Ta results sekce je dlouhá. Už v téhle fázi má práce 77 stran. Nebál bych se to zkrátit a výsledky spíše shrnout. Zdůraznit nějaké zásadnější nebo zajímavější výsledky (třeba ty rozdíly v chování různých zákazníků), nebo takové výsledky, jejichž získání bylo nějak nestandardní nebo obtížné (třeba best vendor s ohledem na to, co znamená best). V té sekci totiž máte hromadu kapitol, které mají v zásadě stejnou strukturu a máte je sepsané stejnými frázemi (viz předchozí bod). Zkondenzujte to - ještě bude kapitola o dashboardu. Grafy dobré, tabulky dobré, krátký komentář dobrý, místy delší, ale celkově zredukovat. Ale nechte si to asi až nakonec, ať tím teď příliš neztrácíte čas.
%% - HIGH-PRIORITY V práci nemáte vůbec žádné externí zdroje. Jasně, vaše práce je spíš product development a data crunch než scientific research, ale tohle se obecně bude považovat za problém. K těm samotným výsledkům a věcem, které se přímo týkají The Event a The Organizer samozřejmě žádné zdroje mít nemůžete, ale například ke zvoleným metodám analýzy, nějaké diskuzi té anonymizace, k volbě nástrojů atd. by to něco potřebovalo. Nemusí toho být moc, ale něco jo (nějakých 10-15 zdrojů by bylo fajn. K metodám spíše knihy, k nástrojům lze sáhnout i po webech, ale ne osobní blogy atd. Při diskuzi technických postupů se lze odkazovat i na dokumentaci apod.)

% Revision notes (30. 12. 2024)
%% Poznámky ke kapitole 3:
%% - Směr dobrý, jdete k věci - to je správné. Dobře, že jste se vůbec nepouštěl do vysvětlování toho, jak funguje dash a plotly - od toho je dokumentace.
%% - To cachování by chtělo trochu rozvést. Ukázky kódu jsou v tomto případě asi celkem ospravedlněné, ale chtělo by to nějak více popsat, co se vlastně děje. Podobně, jak ve future directions zvažujete využití Celery a Redis, bylo by
%%   dobré vysvětlit proč (co to vlastně dělá a proč to chcete). Nemusí to být nijak složité.
%% - Tenhle odstavec (str 84) je podle mě trochu matoucí: "This implementation led to cache key collisions, where callbacks with identical inputs were cached using the same key, resulting in incorrect cached data being returned." Jeden by
%%   čekal, že callbacky s identickými vstupy budou cachovány pod stejným klíčem. Kde je chyba?

% Text revision notes
%% - [x] NOTE: In cooperation with the event organizer: I have chose a "not more undisclosed event organizer" (str 14) - je to správně? Nerozumím tomu.
%% - [x] NOTE: The Event definition: The Event takes place in the begging (str 15)
%% - [x] NOTE: Cashflow and revenue: "these questions should provide currently unclear insights" - podivná formulace, nerozumím jí
%% - [x] NOTE: RQ24: "how much only once" - nemá to být "how many"?
%% - [x] NOTE: Limitations: Anonymized data: ".which may limit certain the analysis in some ways" tu něco nesedí (str 20)
%% - [x] NOTE: Data and methodology: "This chapter address" => addresses
%% - [x] NOTE: Best Sale points: str. 50, přeposlední odstavec: "Another interesting fact is the total unique users processed at the places" - tomu nerozumím - nechybí v té větě neco?
%% - [x] NOTE: "Out of total of 145 sale points, the best place was undeniable the L20 PIVNÍ STAN 1" - tady jsem se rozesmál. Je to důležité, ale zároveň naprosto samozřejmé zjištění.
%% - [x] NOTE: Na několika místech začínáte novou větu (nikoliv otázku) slovem "Which" (např. 2. odstavec sekce 2.2, 3. odstavec v introduction a možná ještě někde). Mám dojem, že to angličtině nedovoluje - which je vztažné zájmenou a mělo by podle mě uvozovat vedlejší větu v souvětí. Možná se mýlím, ale připadá mi to divné.

% Graphical revision notes (charts)
%% - [x] NOTE: Table 1.1: překlep - coffe
%% - [x] NOTE: Figure 1.1: nevím, jestli je to jen u mě, ale to schéma se mi renderuje v mizerné kvalitě na hranici čitelnosti
%% - [x] NOTE: Figure 2.1: Zvažte, jestli chcete tento typ grafu. Na donut chart to má trochu malou díru, až to hraničí z pie chartem. Pie charts jsou lidově populární, ale datasci lidé je nemají rádi (z dobrých důvodů). Jako alternativy
%% se nabízí např. horizontální barplot, treemap nebo waflle (aspoň myslím) diagram. Tohle je low-priority poznámka. Řešil bych to, až když nebudete mít co jiného dělat. Pokud práci bude oponovat např. Karel Šafr, pravděpodobně se u těchto grafů zastaví ;)
%% - [x] NOTE: Figure 2.1: Necháte-li donut/pie chart, alespoň bych doplnil ta procenta do přidružené tabulky.
%% - [x] NOTE: Str. 37: o těch overfull boxes kvůli 3,471,543 CZK a 684,700 CZK asi víte.
%% - [x] NOTE: Figure 2.2: podle mě mírně nešťastný. Ty grafy vedle sebe se trochu špatně porovnávají. Navíc každý znich má jinou yscale, tj. výška sloupce dobře nepřenáší hodnotu. Organizer beer vypadá na první pohled stejně jako
%% external salty. Sloučil bych je do jednoho, nejspíš jako horizontální barplot. Každý bar by odpovídal jedné kategorii produktu, a měl by dvě části (třeba světlou a tmavou dané barvy), jednu reprezentující podíl organizor vendors na prodeji proudktu, druhou podíl external vendors. Tahle varianta více zdůrazňuje jejich rozdílné zastoupení v katergoriích. Alternativně, pokud byste chtěl zdůraznit spíše produktové složení sales organizer vs. external, představoval bych si dva horizontální bars (organizer a external), každý rozdělený na sekce podle produktů. V této druhé variantě bude navíc lépe vidět podíl organizer vs external na celkových sales. Záleží na tom, co chcete spíše zdůraznit. Navíc myslím, že non-alcoholic a beer jste označil stejnou barvou.
%% - [x] NOTE: Figure 2.3: souhlasím. Sankey diagram je cool, ale tady to zabíjí dominantní spent on sales větev. Něco jako waffle chart?
%% - [x] NOTE: Figure 2.4: tady imho ten donut/pie chart vadí ze všeho nejméně, protože ta data jsou jednoduchá a dobře čitelná. Ale zvolil bych ho nakonec nějak konzistentně s předchozími grafy.
%% - [x] NOTE: Figure 2.5: asi stejně jako Figure 2.1
%% - [x] NOTE: Figure 2.6: super.
%% - [x] NOTE: Figure 2.7: velmi malý font, špatně čitelné.
%% - [x] NOTE: Figure 2.8: to je hádám velmi WIP
%% - [x] NOTE: Figure 2.13 a 2.14: mále písmo, špatně čitelné.
%% - [x] Figure 2.4: nevím, co jsou Sel...
%% - [x] Figure 2.10: o nic nejde, ale tenhle graf vybočuje z barevného schématu, které používáte jinde
%% - [x] Figure 2.14: proč to není barplot, jako ostatní? Uchází mi něco? Např. fig 2.16 zobrazuje stejný typ dat -zobrazoval bych je stejně.
%% - [x] Figure 2.17: ten je dobrý. Když zbyde čas, sjednotil bych barevné schéma s ostatními a trochu zvýraznil ty nadpisy
%% - [x] Figure 2.20 a 2.21: nerozumím, co to zobrazuje. neumím si vůbec spojit obsah tabulky s temi barevnými plochami. Buď vysvětlit, nebo nahradit (spíše nahradit)


%%%%% Main document part
%%%%% ------------------------------------------------------------
\begin{document}
%%% title page
	\include{pages/hard-title} % FIXME: remove
	\include{pages/cover}
%%% TODO: copy of the assignment
%    \includepdf[pages={1}]{\ThesisFigures/zadani-zp.pdf}
%    \includepdf[pages={2}]{\ThesisFigures/zadani-zp.pdf}
%%% declaration
	\include{pages/statutory-declaration}
%%% acknowledgements
	\include{pages/acknowledgements}
%%% first page
	\include{pages/firstpage}
%%% abstract
	\include{pages/abstract}
%%% table of contents
	\newpage
	\pagestyle{plain}
	\tableofcontents
%%% chapters
	% chapter - introduction
	\input{pages/chapters/introduction}
	% chapter - methodology
	\input{pages/chapters/data-and-methodology}
	% chapter - data analysis and results
	\input{pages/chapters/data-analysis-and-results}
	% chapter - implementation of the analytical dashboard
	\input{pages/chapters/dashboard-implementation}
	% chapter - conclusion
	\input{pages/chapters/conclusion}
%%% bibliography
	\begin{flushleft}
		\bibliography{/Users/filipditrich/University/master_thesis/thesis/main,/Users/filipditrich/University/master_thesis/thesis/auto}
	\end{flushleft}
%%% list of figures
	\listoffigures
	\textit{Note: Unless stated otherwise, all figures are the author's own work.}
%%% list of tables
	\listoftables
%%% list of source codes
	\listoflistings
%%% appendix
	\input{pages/appendix}
%%% extended summary
	\addtocontents{toc}{\protect\contentsline{chapter}{Extended Summary}{}{}}
\end{document}
